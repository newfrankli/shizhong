# 天气时钟 (Weather Clock)

一个简洁、美观的桌面天气时钟应用，支持实时天气显示、时间日期展示、窗口置底等功能。

## 功能特点

- 🕒 **实时时间与日期**：显示当前时间和日期，自动更新
- ☁ **天气信息**：显示当前位置的天气状况和温度
- 📍 **自动定位**：基于IP自动定位当前城市
- 🏙 **自定义城市**：支持手动设置城市
- 🎨 **字体自定义**：可自定义时间、日期、位置、天气等元素的字体
- 📱 **窗口缩放**：支持鼠标右键拖拽缩放窗口大小
- 📌 **窗口置底**：默认显示在桌面最底层，不影响其他操作
- 🔒 **位置锁定**：可锁定窗口位置和大小，防止误操作
- 🚀 **开机自启**：支持设置开机自动启动
- 💾 **数据缓存**：断网时显示上次天气数据
- 📋 **托盘菜单**：通过系统托盘图标快速访问设置

## 技术栈

- C#
- WPF (Windows Presentation Foundation)
- .NET Framework
- 和风天气 API
- JSON 解析

## 安装说明

### 方法一：直接运行

1. 下载发布版本的可执行文件 `WeatherClock.exe`
2. 双击运行即可

### 方法二：从源码构建

1. 克隆或下载本项目到本地
2. 使用 Visual Studio 打开 `weatherclock.csproj` 文件
3. 编译并运行项目

## 使用方法

### 1. 配置 API Key

首次运行应用时，需要配置和风天气 API Key：

1. 右键点击系统托盘图标，选择「设置」
2. 在设置窗口中输入您的和风天气 API Key
3. 点击「保存并刷新」按钮

> **获取 API Key**：前往 [和风天气开放平台](https://dev.qweather.com/) 注册账号并创建应用，获取 API Key。

### 2. 基本操作

- **移动窗口**：左键拖拽窗口任意位置
- **缩放窗口**：右键拖拽窗口任意位置
- **刷新天气**：点击天气区域或在托盘菜单中选择「刷新天气」
- **锁定窗口**：在托盘菜单中勾选「锁定位置/缩放」
- **设置开机自启**：在托盘菜单中勾选「开机自启」

### 3. 自定义设置

- **自定义城市**：在设置窗口中输入城市名称，留空则使用自动定位
- **字体设置**：在托盘菜单的「字体设置」中可分别设置各元素的字体

## 配置文件

应用配置保存在以下位置：

```
%AppData%\WeatherClock\config.json
```

配置文件包含以下内容：
- API Key 和 API Host
- 自定义城市
- 窗口位置和缩放比例
- 字体设置
- 缓存的天气数据

## 日志文件

应用日志保存在以下位置：

```
%AppData%\WeatherClock\error.log
```

日志文件记录了应用运行状态和天气更新过程，可用于排查问题。

## 常见问题

### Q: 天气显示「请配置Key」
A: 请在设置中输入有效的和风天气 API Key。

### Q: 天气显示「未找到城市」
A: 请检查自定义城市名称是否正确，或留空使用自动定位。

### Q: 窗口无法移动或缩放
A: 请检查是否已锁定窗口位置和大小，可在托盘菜单中解锁。

### Q: 开机自启不生效
A: 请确保应用有写入注册表的权限，或手动添加到启动项。

## 截图

![天气时钟截图](https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=A%20clean%20desktop%20weather%20clock%20application%20on%20Windows%20showing%20time%2C%20date%2C%20location%2C%20weather%20icon%20and%20temperature%2C%20with%20a%20minimalist%20design%20on%20a%20blurred%20background&image_size=landscape_16_9)

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 联系方式

如果您有任何问题或建议，欢迎联系项目维护者。